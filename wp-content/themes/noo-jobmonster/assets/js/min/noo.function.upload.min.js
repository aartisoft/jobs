!function(e){e.fn.noo_upload=function(a){var i={max_file_size:"2mb",runtimes:"html5,flash,html4",multipart:!0,urlstream_upload:!0,max_files:0,upload_enabled:!0,multi_upload:!1,url:nooUpload.url,delete_url:nooUpload.delete_url,flash_swf_url:nooUpload.flash_swf_url,resize:{}};a=e.extend(i,a);var t=a.flash_swf_url,l=a.tag_thumb,d=e("#"+l),o=a.input_name,n=a.multi_upload,u=new plupload.Uploader({browse_button:a.browse_button,file_data_name:"aaiu_upload_file",multi_selection:a.multi_upload,url:a.url,flash_swf_url:t,filters:[{title:"extensions",extensions:"jpg,jpeg,gif,png"}],resize:a.resize,views:{thumb:!0},init:{PostInit:function(){d.innerHTML=""},FilesAdded:function(i,t){plupload.each(t,function(i){n===!1?e("#"+a.browse_button).parent().find(".noo_upload-status").get(0).innerHTML='<div id="'+i.id+'">'+i.name+" ("+plupload.formatSize(i.size)+") <b></b></div>":e("#"+a.browse_button).parent().find(".noo_upload-status").get(0).innerHTML+='<div id="'+i.id+'">'+i.name+" ("+plupload.formatSize(i.size)+") <b></b></div>"}),u.start()},UploadProgress:function(a,i){e("#"+i.id)&&(e("#"+i.id).find("b").get(0).innerHTML="<span>"+i.percent+"%</span>")},Error:function(e,a){n===!1?d.html("\nError #"+a.code+": "+a.message):d.get(0).innerHTML+="\nError #"+a.code+": "+a.message},FileUploaded:function(a,i,t){var l=e.parseJSON(t.response);if(e("#"+i.id).remove(),l.success){var u=l.image_id+",";d.find(".noo-upload-value").val(u),n===!1?d.append('<div class="image-upload-thumb"><img width="150" src="'+l.image+'" /><input type="hidden" name="'+o+'" value="'+l.image_id+'" /><a class="delete-uploaded" data-fileid="'+l.image_id+'" href="#" title="'+nooUpload.remove_txt+'"><i class="fa fa-times-circle"></i></a></div>'):d.append('<div class="image-upload-thumb"><img width="150" src="'+l.image+'" /><input type="hidden" name="'+o+'[]" value="'+l.image_id+'" /><a class="delete-uploaded" data-fileid="'+l.image_id+'" href="#" title="'+nooUpload.remove_txt+'"><i class="fa fa-times-circle"></i></a></div>')}}}});u.init(),d.on("click",".image-upload-thumb .delete-uploaded",function(a){a.preventDefault();var i=e(this);i.parent(".image-upload-thumb").remove();var t={attach_id:i.data("fileid")};return e.post(nooUpload.delete_url,t),!1})}}(jQuery);